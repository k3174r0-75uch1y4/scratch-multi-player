# Scratch課題一括確認ツール 要件定義

## プロジェクト状況
- **進捗**: 要件整理を完了し、Scratch VMベースの確認ビュー設計に着手できる段階。
- **ネクストステップ**: scratch-vm/scratch-render導入方針とReactコンポーネント構成の詳細設計、プロトタイプ実装。

## 目的
複数の`.sb3`ファイルを一括で読み込み、ブラウザ上でステージの表示・再生・確認を迅速に行える講師向けの評価支援ツールを提供する。

## 運用前提
- `.sb3`ファイルは授業ごとに任意のローカルフォルダから選択しアップロードする。
- 追加のクラウド連携は現時点では想定しない。
- 既存のVite + React + TypeScriptプロジェクト上に実装する。

## 機能要件
1. **ファイル読み込み**: 複数の`.sb3`ファイルを同時にローカル選択し、アプリ内にロードできること。
2. **一覧表示**: 読み込んだ各Scratchプロジェクトについて、ステージをScratch VM上で再生可能な状態でReactコンポーネントとして一覧表示する。
3. **ファイル識別**: 各一覧項目で元ファイル名を明示する。
4. **個別詳細表示**: 任意のプロジェクトを選択すると、新しいタブまたはモーダルでScratch公式UIに近いブロック表示を閲覧できる。編集・保存機能は不要。
5. **一括再生**: 一覧画面上の操作で、読み込まれた全プロジェクトに対し緑の旗相当の開始イベントを可能な限り同時に発火する。
6. **再生制御**: 各プロジェクト単位でも緑の旗相当の開始・停止操作を行える。
7. **ステータス表示**: ロード・再生状態などプロジェクト単位の簡易ステータスを表示する。
8. **拡張余地**: 今後の採点メモ機能などを追加しやすいよう、一覧項目にカスタム要素を拡張可能な構造にする。

## 非機能要件
- ブラウザベースで完結し、追加インストールなしで動作する（授業端末のChrome最新版を想定）。
- 同時に複数のScratch VMを扱っても再生時に極端なFPS低下を起こさないよう、レンダリング負荷を考慮する。
- `.sb3`読み込み時のエラーハンドリングは日本語メッセージで表示する。

## 技術構成
- **Node.js**: 24.1.0
- **Vite**: 7.1.7
- **React**: 19.1.1
- **TypeScript**: 5.9.3
- **予定ライブラリ**: `scratch-vm`, `scratch-render`, `scratch-storage`, `scratch-svg-renderer` などScratchオープンソースモジュール

## UI/UX要件
- 一覧カードはステージプレビュー（キャンバス）とファイル名を上下もしくは左右で見やすく配置する。
- 詳細表示は公式Scratch GUIのレイアウトに近い構造を採用し、ブロックパレット・ステージ・スプライトリストの閲覧を可能にする。
- 操作用ボタンは日本語ラベル（例: 「一括再生」「個別再生」）を使用する。

## 残課題・検討事項
- Scratch公式GUI相当のブロック表示をReact内で再現するためのライブラリ組み合わせとパフォーマンス検証。
- 大量の`.sb3`を同時読み込みした場合のメモリ消費とブラウザ制限への対策。
- 採点メモ機能など将来追加予定機能のUI領域確保とデータ保存方式（ローカル保存かクラウド連携か）の検討。
